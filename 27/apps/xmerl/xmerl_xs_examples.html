<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.1">
    <meta name="project" content="xmerl v2.1">


<meta name="exdoc:full-text-search-url" content="/doc/search.html?v=27&q=">
<meta name="major-vsn" content="27">
<link rel="canonical" href="https://www.erlang.org/doc/apps/xmerl/xmerl_xs_examples.html" />
    <title>XSLT-like transformations — xmerl v2.1</title>
    <link rel="stylesheet" href="dist/html-erlang-APNLKZCW.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-3D61D2C0.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-7XSQ4GTY.js"></script>

  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="../../index.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="xmerl" />
        </a>

      <div>
        <a href="../../index.html" class="sidebar-projectName" translate="no">
xmerl
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v2.1
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of xmerl</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/erlang/otp/blob/OTP-27.1.2/lib/xmerl/doc/guides/xmerl_xs_examples.md#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span>XSLT-like transformations</span>
  </h1>

<h3 id="examples" class="section-heading">
  <a href="#examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h3>
<hr class="thin"/><h4>Example 1 Using xslapply</h4><p>original XSLT:</p><pre><code class="makeup erlang" translate="no"><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;doc/title&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">h1</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">h1</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span></code></pre><p>becomes in Erlang:</p><pre><code class="makeup erlang" translate="no"><span class="nf">template</span><span class="p" data-group-id="8881875092-1">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="8881875092-2">{</span><span class="w"> </span><span class="ss">parents</span><span class="o">=</span><span class="p" data-group-id="8881875092-3">[</span><span class="p" data-group-id="8881875092-4">{</span><span class="ss">&#39;doc&#39;</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="8881875092-4">}</span><span class="p">|</span><span class="p">_</span><span class="p" data-group-id="8881875092-3">]</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="8881875092-2">}</span><span class="p" data-group-id="8881875092-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="8881875092-5">[</span><span class="s">&quot;&lt;h1&gt;&quot;</span><span class="p">,</span><span class="w">
         </span><span class="nf">xslapply</span><span class="p" data-group-id="8881875092-6">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="8881875092-6">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/h1&gt;&quot;</span><span class="p" data-group-id="8881875092-5">]</span><span class="p">;</span></code></pre><hr class="thin"/><hr class="thin"/><h4>Example 2 Using value_of and select</h4><pre><code class="makeup erlang" translate="no"><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="ow">div</span><span class="w"> </span><span class="ss">align</span><span class="o">=</span><span class="s">&quot;center&quot;</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="ss">h1</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">value</span><span class="o">-</span><span class="k">of</span><span class="w"> </span><span class="ss">select</span><span class="o">=</span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="o">/</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="ss">h1</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="ow">div</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span></code></pre><p>becomes:</p><pre><code class="makeup erlang" translate="no"><span class="nf">template</span><span class="p" data-group-id="0376528487-1">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="0376528487-2">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="0376528487-2">}</span><span class="p" data-group-id="0376528487-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="0376528487-3">[</span><span class="s">&quot;&lt;div align=\&quot;center\&quot;&gt;&lt;h1&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">value_of</span><span class="p" data-group-id="0376528487-4">(</span><span class="nf">select</span><span class="p" data-group-id="0376528487-5">(</span><span class="s">&quot;.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="0376528487-5">)</span><span class="p" data-group-id="0376528487-4">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;/h1&gt;&lt;/div&gt;&quot;</span><span class="p" data-group-id="0376528487-3">]</span><span class="p">;</span></code></pre><hr class="thin"/><hr class="thin"/><h4>Example 3 Simple xsl stylesheet</h4><p>A complete example with the XSLT sheet in the xmerl distribution.</p><pre><code class="makeup erlang" translate="no"><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">stylesheet</span><span class="w"> </span><span class="ss">version</span><span class="o">=</span><span class="s">&quot;1.0&quot;</span><span class="w">
        </span><span class="nc">xmlns</span><span class="p">:</span><span class="ss">xsl</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/1999/XSL/Transform&quot;</span><span class="w">
        </span><span class="ss">xmlns</span><span class="o">=</span><span class="s">&quot;http://www.w3.org/TR/xhtml1/strict&quot;</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">strip</span><span class="o">-</span><span class="ss">space</span><span class="w"> </span><span class="ss">elements</span><span class="o">=</span><span class="s">&quot;doc chapter section&quot;</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">output</span><span class="w">
    </span><span class="ss">method</span><span class="o">=</span><span class="s">&quot;xml&quot;</span><span class="w">
    </span><span class="ss">indent</span><span class="o">=</span><span class="s">&quot;yes&quot;</span><span class="w">
    </span><span class="ss">encoding</span><span class="o">=</span><span class="s">&quot;iso-8859-1&quot;</span><span class="w">
  </span><span class="o">/</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;doc&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">html</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="ss">head</span><span class="o">&gt;</span><span class="w">
        </span><span class="o">&lt;</span><span class="ss">title</span><span class="o">&gt;</span><span class="w">
          </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">value</span><span class="o">-</span><span class="k">of</span><span class="w"> </span><span class="ss">select</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
        </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">title</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">head</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="ss">body</span><span class="o">&gt;</span><span class="w">
        </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">body</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">html</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;doc/title&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">h1</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">h1</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;chapter/title&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">h2</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">h2</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;section/title&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">h3</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">h3</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;para&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">p</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">p</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;note&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">p</span><span class="w"> </span><span class="ss">class</span><span class="o">=</span><span class="s">&quot;note&quot;</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="ss">b</span><span class="o">&gt;</span><span class="n">NOTE</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">b</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">p</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;emph&quot;</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="ss">em</span><span class="o">&gt;</span><span class="w">
      </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="o">/</span><span class="o">&gt;</span><span class="w">
    </span><span class="o">&lt;</span><span class="o">/</span><span class="ss">em</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">stylesheet</span><span class="o">&gt;</span></code></pre><hr class="thin"/><hr class="thin"/><h4>Example 4 Erlang version</h4><p>Erlang transformation of previous example:</p><pre><code class="makeup erlang" translate="no"><span class="p">-</span><span class="na">include</span><span class="p" data-group-id="7817781320-1">(</span><span class="s">&quot;xmerl.hrl&quot;</span><span class="p" data-group-id="7817781320-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">import</span><span class="p" data-group-id="7817781320-2">(</span><span class="ss">xmerl_xs</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7817781320-3">[</span><span class="w"> </span><span class="ss">xslapply</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">value_of</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">select</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">built_in_rules</span><span class="p">/</span><span class="mi">2</span><span class="w"> </span><span class="p" data-group-id="7817781320-3">]</span><span class="p" data-group-id="7817781320-2">)</span><span class="p">.</span><span class="w">

</span><span class="nf">doctype</span><span class="p" data-group-id="7817781320-4">(</span><span class="p" data-group-id="7817781320-4">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="s">&quot;&lt;!DOCTYPE html PUBLIC \&quot;-//W3C//DTD XHTML 1.0 Transitional//EN\&quot;\
 \&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd \&quot;&gt;&quot;</span><span class="p">.</span><span class="w">

</span><span class="nf">process_xml</span><span class="p" data-group-id="7817781320-5">(</span><span class="n">Doc</span><span class="p" data-group-id="7817781320-5">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">template</span><span class="p" data-group-id="7817781320-6">(</span><span class="n">Doc</span><span class="p" data-group-id="7817781320-6">)</span><span class="p">.</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-7">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-8">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;doc&#39;</span><span class="p" data-group-id="7817781320-8">}</span><span class="p" data-group-id="7817781320-7">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-9">[</span><span class="w"> </span><span class="s">&quot;&lt;\?xml version=\&quot;1.0\&quot; encoding=\&quot;iso-8859-1\&quot;\?&gt;&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nf">doctype</span><span class="p" data-group-id="7817781320-10">(</span><span class="p" data-group-id="7817781320-10">)</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;&lt;html xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot; &gt;&quot;</span><span class="w">
      </span><span class="s">&quot;&lt;head&gt;&quot;</span><span class="w">
      </span><span class="s">&quot;&lt;title&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">value_of</span><span class="p" data-group-id="7817781320-11">(</span><span class="nf">select</span><span class="p" data-group-id="7817781320-12">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="7817781320-12">)</span><span class="p" data-group-id="7817781320-11">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;/title&gt;&quot;</span><span class="w">
      </span><span class="s">&quot;&lt;/head&gt;&quot;</span><span class="w">
      </span><span class="s">&quot;&lt;body&gt;&quot;</span><span class="p">,</span><span class="w">
      </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-13">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-13">)</span><span class="p">,</span><span class="w">
      </span><span class="s">&quot;&lt;/body&gt;&quot;</span><span class="w">
      </span><span class="s">&quot;&lt;/html&gt;&quot;</span><span class="w"> </span><span class="p" data-group-id="7817781320-9">]</span><span class="p">;</span><span class="w">


</span><span class="nf">template</span><span class="p" data-group-id="7817781320-14">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-15">{</span><span class="w"> </span><span class="ss">parents</span><span class="o">=</span><span class="p" data-group-id="7817781320-16">[</span><span class="p" data-group-id="7817781320-17">{</span><span class="ss">&#39;doc&#39;</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7817781320-17">}</span><span class="p">|</span><span class="p">_</span><span class="p" data-group-id="7817781320-16">]</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="7817781320-15">}</span><span class="p" data-group-id="7817781320-14">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-18">[</span><span class="s">&quot;&lt;h1&gt;&quot;</span><span class="p">,</span><span class="w">
     </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-19">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-19">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/h1&gt;&quot;</span><span class="p" data-group-id="7817781320-18">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-20">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-21">{</span><span class="w"> </span><span class="ss">parents</span><span class="o">=</span><span class="p" data-group-id="7817781320-22">[</span><span class="p" data-group-id="7817781320-23">{</span><span class="ss">&#39;chapter&#39;</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7817781320-23">}</span><span class="p">|</span><span class="p">_</span><span class="p" data-group-id="7817781320-22">]</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="7817781320-21">}</span><span class="p" data-group-id="7817781320-20">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-24">[</span><span class="s">&quot;&lt;h2&gt;&quot;</span><span class="p">,</span><span class="w">
     </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-25">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-25">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/h2&gt;&quot;</span><span class="p" data-group-id="7817781320-24">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-26">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-27">{</span><span class="w"> </span><span class="ss">parents</span><span class="o">=</span><span class="p" data-group-id="7817781320-28">[</span><span class="p" data-group-id="7817781320-29">{</span><span class="ss">&#39;section&#39;</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="7817781320-29">}</span><span class="p">|</span><span class="p">_</span><span class="p" data-group-id="7817781320-28">]</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="7817781320-27">}</span><span class="p" data-group-id="7817781320-26">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-30">[</span><span class="s">&quot;&lt;h3&gt;&quot;</span><span class="p">,</span><span class="w">
     </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-31">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-31">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/h3&gt;&quot;</span><span class="p" data-group-id="7817781320-30">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-32">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-33">{</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;para&#39;</span><span class="p" data-group-id="7817781320-33">}</span><span class="p" data-group-id="7817781320-32">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-34">[</span><span class="s">&quot;&lt;p&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-35">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-35">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;/p&gt;&quot;</span><span class="p" data-group-id="7817781320-34">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-36">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-37">{</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;note&#39;</span><span class="p" data-group-id="7817781320-37">}</span><span class="p" data-group-id="7817781320-36">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-38">[</span><span class="s">&quot;&lt;p class=\&quot;note\&quot;&gt;&quot;</span><span class="w">
     </span><span class="s">&quot;&lt;b&gt;NOTE: &lt;/b&gt;&quot;</span><span class="p">,</span><span class="w">
     </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-39">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-39">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/p&gt;&quot;</span><span class="p" data-group-id="7817781320-38">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-40">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="7817781320-41">{</span><span class="w"> </span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;emph&#39;</span><span class="p" data-group-id="7817781320-41">}</span><span class="p" data-group-id="7817781320-40">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="7817781320-42">[</span><span class="s">&quot;&lt;em&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">xslapply</span><span class="p" data-group-id="7817781320-43">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-43">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;/em&gt;&quot;</span><span class="p" data-group-id="7817781320-42">]</span><span class="p">;</span><span class="w">

</span><span class="nf">template</span><span class="p" data-group-id="7817781320-44">(</span><span class="n">E</span><span class="p" data-group-id="7817781320-44">)</span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">built_in_rules</span><span class="p" data-group-id="7817781320-45">(</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="7817781320-45">)</span><span class="p">.</span></code></pre><p>It is important to end with a call to <a href="xmerl_xs.html#built_in_rules/2"><code class="inline">xmerl_xs:built_in_rules/2</code></a> if you want any
text to be written in &quot;push&quot; transforms. That are the ones using a lot <code class="inline">xslapply( fun template/1, E )</code> instead of <code class="inline">value_of(select(&quot;xpath&quot;,E))</code>, which is pull...</p><hr class="thin"/><p>The largest example is the stylesheet to transform this document from the
Simplified Docbook XML format to xhtml. The source file is sdocbook2xhtml.erl.</p><h3 id="tips-and-tricks" class="section-heading">
  <a href="#tips-and-tricks" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Tips and tricks</span>
</h3>
<h4>for-each</h4><p>The function for-each is quite common in XSLT stylesheets. It can often be
rewritten and replaced by select/1. Since select/1 returns a list of
#xmlElements and xslapply/2 traverses them it is more or less the same as to
loop over all the elements.</p><h4>position()</h4><p>The XSLT position() and #xmlElement.pos are not the same. One has to make an own
position in Erlang.</p><hr class="thin"/><h4>Example 5 Counting positions</h4><pre><code class="makeup erlang" translate="no"><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;stanza&quot;</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="ss">p</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="nb">apply</span><span class="o">-</span><span class="ss">templates</span><span class="w"> </span><span class="ss">select</span><span class="o">=</span><span class="s">&quot;line&quot;</span><span class="w"> </span><span class="o">/</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="ss">p</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span><span class="w">

</span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="w"> </span><span class="ss">match</span><span class="o">=</span><span class="s">&quot;line&quot;</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="k">if</span><span class="w"> </span><span class="ss">test</span><span class="o">=</span><span class="s">&quot;position() mod 2 = 0&quot;</span><span class="o">&gt;</span><span class="err">&amp;</span><span class="p">#</span><span class="mi">160</span><span class="p">;</span><span class="err">&amp;</span><span class="p">#</span><span class="mi">160</span><span class="p">;</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="k">if</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">value</span><span class="o">-</span><span class="k">of</span><span class="w"> </span><span class="ss">select</span><span class="o">=</span><span class="s">&quot;.&quot;</span><span class="w"> </span><span class="o">/</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="ss">br</span><span class="w"> </span><span class="o">/</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">xsl</span><span class="p">:</span><span class="ss">template</span><span class="o">&gt;</span></code></pre><p>Can be written as</p><pre><code class="makeup erlang" translate="no"><span class="nf">template</span><span class="p" data-group-id="0359598198-1">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="0359598198-2">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;stanza&#39;</span><span class="p" data-group-id="0359598198-2">}</span><span class="p" data-group-id="0359598198-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="0359598198-3">{</span><span class="n">Lines</span><span class="p">,</span><span class="n">LineNo</span><span class="p" data-group-id="0359598198-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">mapfoldl</span><span class="p" data-group-id="0359598198-4">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template_pos</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nf">select</span><span class="p" data-group-id="0359598198-5">(</span><span class="s">&quot;line&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="0359598198-5">)</span><span class="p" data-group-id="0359598198-4">)</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="0359598198-6">[</span><span class="s">&quot;&lt;p&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Lines</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;/p&gt;&quot;</span><span class="p" data-group-id="0359598198-6">]</span><span class="p">.</span><span class="w">

</span><span class="nf">template_pos</span><span class="p" data-group-id="0359598198-7">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="0359598198-8">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;line&#39;</span><span class="p" data-group-id="0359598198-8">}</span><span class="p">,</span><span class="w"> </span><span class="n">P</span><span class="p" data-group-id="0359598198-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="0359598198-9">{</span><span class="p" data-group-id="0359598198-10">[</span><span class="nf">indent_line</span><span class="p" data-group-id="0359598198-11">(</span><span class="n">P</span><span class="w"> </span><span class="ow">rem</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="0359598198-11">)</span><span class="p">,</span><span class="w"> </span><span class="nf">value_of</span><span class="p" data-group-id="0359598198-12">(</span><span class="n">E</span><span class="o">#</span><span class="ss">xmlElement</span><span class="p">.</span><span class="ss">content</span><span class="p" data-group-id="0359598198-12">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;br /&gt;&quot;</span><span class="p" data-group-id="0359598198-10">]</span><span class="p">,</span><span class="w"> </span><span class="n">P</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p" data-group-id="0359598198-9">}</span><span class="p">.</span><span class="w">

</span><span class="nf">indent_line</span><span class="p" data-group-id="0359598198-13">(</span><span class="mi">0</span><span class="p" data-group-id="0359598198-13">)</span><span class="p">-&gt;</span><span class="s">&quot;&amp;#160;&amp;#160;&quot;</span><span class="p">;</span><span class="w">
</span><span class="nf">indent_line</span><span class="p" data-group-id="0359598198-14">(</span><span class="p">_</span><span class="p" data-group-id="0359598198-14">)</span><span class="p">-&gt;</span><span class="s">&quot;&quot;</span><span class="p">.</span></code></pre><hr class="thin"/><h4>Global tree awareness</h4><p>In XSLT you have &quot;root&quot; access to the top of the tree with XPath, even though
you are somewhere deep in your tree.</p><p>The xslapply/2 function only carries back the child part of the tree to the
template fun. But it is quite easy to write template funs that handles both the
child and top tree.</p><hr class="thin"/><h4>Example 6 Passing the root tree</h4><p>The following example piece will prepend the article title to any section title</p><pre><code class="makeup erlang" translate="no"><span class="nf">template</span><span class="p" data-group-id="1344115474-1">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="1344115474-2">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;title&#39;</span><span class="p" data-group-id="1344115474-2">}</span><span class="p">,</span><span class="w"> </span><span class="n">ETop</span><span class="w"> </span><span class="p" data-group-id="1344115474-1">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="1344115474-3">[</span><span class="s">&quot;&lt;h3&gt;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">value_of</span><span class="p" data-group-id="1344115474-4">(</span><span class="nf">select</span><span class="p" data-group-id="1344115474-5">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ETop</span><span class="p" data-group-id="1344115474-5">)</span><span class="p" data-group-id="1344115474-4">)</span><span class="p">,</span><span class="s">&quot; - &quot;</span><span class="p">,</span><span class="w">
     </span><span class="nf">xslapply</span><span class="p" data-group-id="1344115474-6">(</span><span class="w"> </span><span class="nf">fun</span><span class="p" data-group-id="1344115474-7">(</span><span class="n">A</span><span class="p" data-group-id="1344115474-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">template</span><span class="p" data-group-id="1344115474-8">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">ETop</span><span class="p" data-group-id="1344115474-8">)</span><span class="w"> </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="1344115474-6">)</span><span class="p">,</span><span class="w">
     </span><span class="s">&quot;&lt;/h3&gt;&quot;</span><span class="p" data-group-id="1344115474-3">]</span><span class="p">;</span></code></pre><hr class="thin"/>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="xmerl_examples.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Customization functions
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.1) for the

          <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

      </p>
<p>Copyright © 1996-2024 <a href="https://www.ericsson.com">Ericsson AB</a></p>
    </footer>
  </div>
</main>
</div>
<script>
  function mermaidLoaded() {
    mermaid.initialize({
      startOnLoad: false,
      theme: document.body.className.includes("dark") ? "dark" : "default"
    });
    let id = 0;
    for (const codeEl of document.querySelectorAll("pre code.mermaid")) {
      const preEl = codeEl.parentElement;
      const graphDefinition = codeEl.textContent;
      const graphEl = document.createElement("div");
      const graphId = "mermaid-graph-" + id++;
      mermaid.render(graphId, graphDefinition).then(({svg, bindFunctions}) => {
        graphEl.innerHTML = svg;
        bindFunctions?.(graphEl);
        preEl.insertAdjacentElement("afterend", graphEl);
        preEl.remove();
      });
    }
  }
</script>
<script async src="https://cdn.jsdelivr.net/npm/mermaid@10.2.3/dist/mermaid.min.js" onload="mermaidLoaded();"></script>

  </body>
</html>
